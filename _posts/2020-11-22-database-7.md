---
layout: post
title:  " [MYSQL] Where,Group By,Order By 절의 인덱스 사용"
date:   2020-11-22
desc: "Where,Group By,Order By 절의 인덱스 사용"
keywords: "database"
categories: [Database]
tags: [Database]
icon: icon-html
---

인덱스를 사용하기 위한 기본 규칙
====

<br/>

### where절이나 order by또는 group by가 인덱스를 사용하려면 기본적으로 인덱스된 컬럼의 값 자체를
### 변환하지 않고 그대로 사용한다는 조건을 만족해야 한다. 인덱스는 칼럼의 값을 아무런 변환 없이
### B-Tree에 정렬해서 저장한다. where,group by, order by에서도 원본값을 검색하거나 정렬할 때만
### B-Tree에 정렬된 인덱스를 이용한다.

<br/>

### 다음 예제의 where절과 같이 salary칼럼을 가공한후 다른 상수 값과 비교한다면 다음의 쿼리는 인덱스를 적절히 이용하지 못하게 된다.

``` sql
SELECT * FROM salaries WHERE salary*10>15000;
```

<br/>

### where절에 사용되는 비교 조건에서 연산자 양쪽의 두 비교 대상 값은 데이터 타입이 일치해야 한다. 

``` sql
create table tb_test (age VARCHAR(10),~~)
select * from tb_test where age=2
```
### 위와 같은 경우 인덱스 레인지 스캔이 아니라 인덱스 풀 스캔을 하게 된다. 그 이유는 age칼럼의 데이터 타입(VARCHAR)과
### 비교되는 값 2(INTEGER 타입)의 데이터 타입이 다르기 때문이다.